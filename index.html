<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen de Diagnóstico 4to Secundaria</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Color de fondo oscuro */
            color: #e2e8f0; /* Color de texto claro */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }

        .container {
            max-width: 700px;
            width: 100%;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">

    <div id="app" class="container bg-gray-800 p-8 md:p-10 rounded-xl shadow-lg border border-gray-700">
        
        <!-- Pantalla de Inicio -->
        <div id="start-screen" class="text-center transition-opacity duration-500 ease-in-out">
            <h1 class="text-3xl md:text-4xl font-bold mb-4">Examen diagnóstico del Centro Educativo en artes Eduardo Brito</h1>
            <p class="text-lg mb-6">Evaluación para 4to de Secundaria.</p>
            <p class="text-md mb-8">El examen consta de 5 temas, cada uno con 4 preguntas. Cada tema vale 20 puntos, para un total de 100 puntos.</p>

            <div class="mb-6 space-y-4 text-left">
                <input type="text" id="student-name" placeholder="Tu nombre completo" class="w-full px-4 py-3 rounded-lg bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" />
                
                <!-- Lista desplegable para Grado y Sección -->
                <select id="student-grade-section" class="w-full px-4 py-3 rounded-lg bg-gray-700 text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <option value="" disabled selected>Selecciona tu grado y sección</option>
                    <option value="4to A">4to A</option>
                    <option value="4to B">4to B</option>
                    <option value="4to C">4to C</option>
                    <option value="4to D">4to D</option>
                    <option value="4to E">4to E</option>
                    <option value="4to F">4to F</option>
                </select>

                <!-- Lista desplegable para Número de Orden -->
                <select id="student-order-number" class="w-full px-4 py-3 rounded-lg bg-gray-700 text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <option value="" disabled selected>Selecciona tu número de orden</option>
                    <!-- Las opciones se generarán con JavaScript -->
                </select>

                <input type="tel" id="student-phone-number" placeholder="Tu número de teléfono" class="w-full px-4 py-3 rounded-lg bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" />
            </div>

            <button id="start-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-transform duration-200 transform hover:scale-105">
                Comenzar Examen
            </button>
        </div>

        <!-- Sección de Preguntas del Examen -->
        <div id="quiz-screen" class="hidden transition-opacity duration-500 ease-in-out opacity-0">
            <h2 id="quiz-topic" class="text-2xl font-semibold mb-4 text-center"></h2>
            <div class="mb-6 bg-gray-700 p-4 rounded-lg">
                <p id="question-text" class="text-lg mb-4"></p>
                <div id="answers-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Las respuestas se insertarán aquí por JavaScript -->
                </div>
            </div>
            <div class="flex justify-between items-center text-sm">
                <p id="question-counter">Pregunta 1 de 20</p>
                <button id="next-btn" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors" disabled>Siguiente</button>
            </div>
        </div>

        <!-- Pantalla de Resultados -->
        <div id="results-screen" class="hidden text-center transition-opacity duration-500 ease-in-out opacity-0">
            <h2 class="text-3xl md:text-4xl font-bold mb-4 text-green-400">¡Examen Terminado!</h2>
            <p class="text-xl mb-4">Tu puntuación total es:</p>
            <p id="total-score" class="text-5xl md:text-6xl font-extrabold mb-8 text-indigo-400"></p>

            <div id="topic-results" class="space-y-4">
                <h3 class="text-2xl font-semibold mt-6 mb-4">Resultados por Tema:</h3>
                <!-- Los resultados por tema se insertarán aquí por JavaScript -->
            </div>
            
            <button id="whatsapp-link-btn" class="inline-block mt-8 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-transform duration-200 transform hover:scale-105">
                Enviar resultados por WhatsApp
            </button>
        </div>

    </div>

    <script>
        // Datos del examen
        const quizData = [
            // Tema 1: Valores y Virtudes
            {
                topic: "Valores y Virtudes",
                questions: [
                    {
                        question: "¿Cuál de los siguientes es un valor que fomenta la convivencia pacífica?",
                        answers: ["El egoísmo", "La arrogancia", "La empatía", "La indiferencia"],
                        correctAnswer: "La empatía"
                    },
                    {
                        question: "La virtud de la fortaleza se define como:",
                        answers: ["Ser el más fuerte físicamente", "Soportar la adversidad con paciencia", "No tener miedo a nada", "Actuar sin pensar en las consecuencias"],
                        correctAnswer: "Soportar la adversidad con paciencia"
                    },
                    {
                        question: "La honestidad es un valor fundamental porque:",
                        answers: ["Permite ganar dinero fácilmente", "Construye confianza y credibilidad", "Garantiza el éxito profesional", "Hace que todos te admiren"],
                        correctAnswer: "Construye confianza y credibilidad"
                    },
                    {
                        question: "¿Qué es la solidaridad?",
                        answers: ["Ayudar a alguien que lo pide a cambio de algo", "Actuar en beneficio propio", "Apoyar a otros sin esperar nada a cambio", "Ser el líder de un grupo"],
                        correctAnswer: "Apoyar a otros sin esperar nada a cambio"
                    }
                ]
            },
            // Tema 2: La Familia y la Sociedad
            {
                topic: "La Familia y la Sociedad",
                questions: [
                    {
                        question: "¿Cuál es el rol principal de la familia en la formación de la persona?",
                        answers: ["Ser un lugar de ocio y diversión", "Proporcionar bienes materiales", "Transmitir valores y principios", "Competir con otras familias"],
                        correctAnswer: "Transmitir valores y principios"
                    },
                    {
                        question: "El respeto a las personas mayores es una muestra de:",
                        answers: ["Debilidad", "Intolerancia", "Sabiduría popular", "Valoración y gratitud"],
                        correctAnswer: "Valoración y gratitud"
                    },
                    {
                        question: "¿Qué significa el compromiso social?",
                        answers: ["Participar en eventos de caridad una vez al año", "Ser indiferente a los problemas de los demás", "Participar activamente en la mejora de la comunidad", "Criticar los problemas sin proponer soluciones"],
                        correctAnswer: "Participar activamente en la mejora de la comunidad"
                    },
                    {
                        question: "¿Qué es el bien común?",
                        answers: ["El beneficio de una sola persona", "El interés de un grupo minoritario", "El conjunto de condiciones que permiten a todos alcanzar su pleno desarrollo", "Los intereses de los más poderosos"],
                        correctAnswer: "El conjunto de condiciones que permiten a todos alcanzar su pleno desarrollo"
                    }
                ]
            },
            // Tema 3: La Fe y la Espiritualidad
            {
                topic: "La Fe y la Espiritualidad",
                questions: [
                    {
                        question: "¿Qué es la fe en el contexto religioso?",
                        answers: ["Una obligación impuesta", "Una creencia sin fundamento", "Confiar en Dios y en sus promesas", "Un simple ritual social"],
                        correctAnswer: "Confiar en Dios y en sus promesas"
                    },
                    {
                        question: "La oración es una forma de:",
                        answers: ["Negociar con Dios", "Meditar sobre uno mismo", "Comunicarse con la divinidad", "Pedir un deseo"],
                        correctAnswer: "Comunicarse con la divinidad"
                    },
                    {
                        question: "¿Cuál de los siguientes es un ejemplo de práctica espiritual?",
                        answers: ["Jugar un videojuego", "Meditar en silencio", "Hacer ejercicio físico", "Ver una película"],
                        correctAnswer: "Meditar en silencio"
                    },
                    {
                        question: "En la tradición cristiana, ¿qué simboliza el Bautismo?",
                        answers: ["Un rito de paso a la adultez", "La purificación de los pecados y el inicio de la vida en la fe", "Un acto de obediencia a los padres", "Un evento social"],
                        correctAnswer: "La purificación de los pecados y el inicio de la vida en la fe"
                    }
                ]
            },
            // Tema 4: Principios Éticos y Morales
            {
                topic: "Principios Éticos y Morales",
                questions: [
                    {
                        question: "La ética se define como:",
                        answers: ["Las reglas de un juego", "El conjunto de normas sociales", "La disciplina que estudia el bien y el mal", "Las leyes de un país"],
                        correctAnswer: "La disciplina que estudia el bien y el mal"
                    },
                    {
                        question: "Actuar con justicia significa:",
                        answers: ["Hacer lo que más te beneficia", "Tratar a todos de la misma manera", "Dar a cada uno lo que le corresponde", "Ignorar las diferencias entre las personas"],
                        correctAnswer: "Dar a cada uno lo que le corresponde"
                    },
                    {
                        question: "¿Qué es la moral?",
                        answers: ["Las creencias de una persona", "El comportamiento de una sociedad", "El conjunto de costumbres y normas de un grupo", "La disciplina que estudia las leyes"],
                        correctAnswer: "El conjunto de costumbres y normas de un grupo"
                    },
                    {
                        question: "Un dilema ético ocurre cuando:",
                        answers: ["Debes elegir entre dos opciones moralmente buenas o malas", "Solo hay una opción correcta", "No hay opciones disponibles", "Alguien te dice qué hacer"],
                        correctAnswer: "Debes elegir entre dos opciones moralmente buenas o malas"
                    }
                ]
            },
            // Tema 5: La Comunidad y el Servicio
            {
                topic: "La Comunidad y el Servicio",
                questions: [
                    {
                        question: "El servicio a los demás es importante porque:",
                        answers: ["Te hace sentir superior", "Fortalece los lazos comunitarios", "Es una obligación", "Solo beneficia a quien lo recibe"],
                        correctAnswer: "Fortalece los lazos comunitarios"
                    },
                    {
                        question: "¿Qué es la vocación de servicio?",
                        answers: ["Ayudar solo a los que te agradan", "Un llamado a contribuir al bienestar de los demás", "Una actividad que se hace por obligación", "Un pasatiempo"],
                        correctAnswer: "Un llamado a contribuir al bienestar de los demás"
                    },
                    {
                        question: "La comunidad es un espacio para:",
                        answers: ["Aislarse de los demás", "Competir por recursos", "Crecer y desarrollarse en conjunto", "Solo recibir ayuda"],
                        correctAnswer: "Crecer y desarrollarse en conjunto"
                    },
                    {
                        question: "¿Cuál es un beneficio de participar en un proyecto comunitario?",
                        answers: ["Ganar dinero", "Aprender a ser más egoísta", "Desarrollar habilidades y valores", "No tener que interactuar con otras personas"],
                        correctAnswer: "Desarrollar habilidades y valores"
                    }
                ]
            }
        ];

        // Variables del estado de la aplicación
        let currentQuestionIndex = 0;
        let score = 0;
        const topicScores = {};
        let selectedAnswer = null;
        let studentName = '';
        let studentGradeSection = '';
        let studentOrderNumber = '';
        let studentPhoneNumber = '';
        
        // Seleccionar elementos del DOM
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');
        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-btn');
        const questionText = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');
        const questionCounter = document.getElementById('question-counter');
        const quizTopic = document.getElementById('quiz-topic');
        const totalScoreElement = document.getElementById('total-score');
        const topicResultsContainer = document.getElementById('topic-results');
        const studentNameInput = document.getElementById('student-name');
        const studentGradeSectionInput = document.getElementById('student-grade-section');
        const studentOrderNumberInput = document.getElementById('student-order-number');
        const studentPhoneNumberInput = document.getElementById('student-phone-number');
        const whatsappLinkBtn = document.getElementById('whatsapp-link-btn');
        
        // Generar opciones para el número de orden
        window.onload = function() {
            const orderNumberSelect = document.getElementById('student-order-number');
            for (let i = 1; i <= 55; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                orderNumberSelect.appendChild(option);
            }
        };

        // Eventos
        startBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', () => {
            if (selectedAnswer) {
                checkAnswer(selectedAnswer.textContent);
            }
        });

        // Funciones del juego
        function startQuiz() {
            studentName = studentNameInput.value.trim();
            studentGradeSection = studentGradeSectionInput.value;
            studentOrderNumber = studentOrderNumberInput.value;
            studentPhoneNumber = studentPhoneNumberInput.value.trim();
            
            if (!studentName || studentGradeSection === '' || studentOrderNumber === '') {
                // Validación para iniciar el examen
                alert('Por favor, ingresa tu nombre, grado y número de orden para comenzar.');
                return;
            }

            startScreen.classList.add('hidden', 'opacity-0');
            startScreen.classList.remove('flex');
            quizScreen.classList.remove('hidden', 'opacity-0');
            quizScreen.classList.add('flex', 'flex-col');
            
            // Inicializar puntuaciones por tema
            quizData.forEach(topic => {
                topicScores[topic.topic] = 0;
            });
            
            displayQuestion();
        }

        function displayQuestion() {
            // Obtener la pregunta actual del array
            const currentTopicIndex = Math.floor(currentQuestionIndex / 4);
            const currentQuestionInTopicIndex = currentQuestionIndex % 4;
            const currentTopic = quizData[currentTopicIndex];
            const currentQuestion = currentTopic.questions[currentQuestionInTopicIndex];

            // Actualizar la interfaz
            quizTopic.textContent = `Tema: ${currentTopic.topic}`;
            questionText.textContent = currentQuestion.question;
            answersContainer.innerHTML = ''; // Limpiar respuestas anteriores
            selectedAnswer = null;
            nextBtn.disabled = true; // Deshabilitar el botón Siguiente
            nextBtn.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
            nextBtn.classList.add('bg-gray-600', 'hover:bg-gray-500');

            // Actualizar contador de preguntas
            questionCounter.textContent = `Pregunta ${currentQuestionIndex + 1} de 20`;

            // Crear botones para cada respuesta
            currentQuestion.answers.forEach(answer => {
                const button = document.createElement('button');
                button.textContent = answer;
                button.classList.add(
                    'answer-btn',
                    'py-3',
                    'px-4',
                    'bg-gray-700',
                    'hover:bg-gray-600',
                    'rounded-lg',
                    'text-left',
                    'transition-colors',
                    'duration-200',
                    'font-medium'
                );
                button.addEventListener('click', () => {
                    // Remover la clase de selección de la respuesta anterior
                    if (selectedAnswer) {
                        selectedAnswer.classList.remove('border-2', 'border-indigo-500');
                    }
                    selectedAnswer = button;
                    selectedAnswer.classList.add('border-2', 'border-indigo-500');
                    nextBtn.disabled = false; // Habilitar el botón Siguiente
                    nextBtn.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
                    nextBtn.classList.remove('bg-gray-600', 'hover:bg-gray-500');
                });
                answersContainer.appendChild(button);
            });
        }

        function checkAnswer(userAnswer) {
            const currentTopicIndex = Math.floor(currentQuestionIndex / 4);
            const currentQuestionInTopicIndex = currentQuestionIndex % 4;
            const currentTopic = quizData[currentTopicIndex];
            const currentQuestion = currentTopic.questions[currentQuestionInTopicIndex];
            
            // Si la respuesta es correcta, actualizar la puntuación
            if (userAnswer === currentQuestion.correctAnswer) {
                // Cada pregunta correcta de un tema vale 5 puntos (20 puntos / 4 preguntas)
                score += 5;
                topicScores[currentTopic.topic] += 5;
            }

            // Pasar a la siguiente pregunta
            currentQuestionIndex++;
            if (currentQuestionIndex < quizData.reduce((acc, curr) => acc + curr.questions.length, 0)) {
                displayQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            quizScreen.classList.add('hidden', 'opacity-0');
            quizScreen.classList.remove('flex');
            resultsScreen.classList.remove('hidden', 'opacity-0');
            resultsScreen.classList.add('flex', 'flex-col');
            
            totalScoreElement.textContent = `${score}/100`;

            topicResultsContainer.innerHTML = '';
            // Mostrar el desglose de resultados por tema
            quizData.forEach(topic => {
                const topicScore = topicScores[topic.topic];
                const resultItem = document.createElement('div');
                resultItem.classList.add('bg-gray-700', 'p-4', 'rounded-lg', 'flex', 'justify-between', 'items-center');
                resultItem.innerHTML = `
                    <p class="font-semibold text-lg">${topic.topic}</p>
                    <span class="text-xl font-bold text-indigo-300">${topicScore}/20</span>
                `;
                topicResultsContainer.appendChild(resultItem);
            });
            
            // Número fijo de destino para el mensaje de WhatsApp, ahora con el código de país.
            const fixedTeacherPhoneNumber = '18098936842';
            
            // Generar el mensaje de WhatsApp
            const message = `Aquí están los resultados de un examen de diagnóstico:\n\nNombre: ${studentName}\nGrado y Sección: ${studentGradeSection}\nNúmero de Orden: ${studentOrderNumber}\nNúmero de Teléfono del estudiante: ${studentPhoneNumber}\n\nCalificación total: ${score}/100\n\nResultados por tema:\n- Valores y Virtudes: ${topicScores['Valores y Virtudes']}/20\n- La Familia y la Sociedad: ${topicScores['La Familia y la Sociedad']}/20\n- La Fe y la Espiritualidad: ${topicScores['La Fe y la Espiritualidad']}/20\n- Principios Éticos y Morales: ${topicScores['Principios Éticos y Morales']}/20\n- La Comunidad y el Servicio: ${topicScores['La Comunidad y el Servicio']}/20`;
            const encodedMessage = encodeURIComponent(message);
            
            // Asignar el evento al botón de WhatsApp
            whatsappLinkBtn.onclick = function() {
                window.open(`https://wa.me/${fixedTeacherPhoneNumber}?text=${encodedMessage}`, '_blank');
            };
        }
        
        // Validación inicial para el botón de inicio
        const checkInputs = () => {
             // Ahora se validan el nombre, grado y número de orden usando los select
             if (studentNameInput.value.trim() && studentGradeSectionInput.value !== '' && studentOrderNumberInput.value !== '') {
                 startBtn.disabled = false;
                 startBtn.classList.remove('bg-gray-600', 'hover:bg-gray-500');
                 startBtn.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
             } else {
                 startBtn.disabled = true;
                 startBtn.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                 startBtn.classList.add('bg-gray-600', 'hover:bg-gray-500');
             }
        };

        studentNameInput.addEventListener('input', checkInputs);
        studentGradeSectionInput.addEventListener('change', checkInputs);
        studentOrderNumberInput.addEventListener('change', checkInputs);

        startBtn.disabled = true;
        startBtn.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
        startBtn.classList.add('bg-gray-600', 'hover:bg-gray-500');
    </script>

</body>
</html>



